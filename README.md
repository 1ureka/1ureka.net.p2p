# 1ureka.net.p2p

> [!IMPORTANT]
> **一個能讓你把任意 TCP 服務透過 WebRTC 分享給遠端的桌面工具。**

我相信網路應該是自由的 ——
不該因為沒有固定 IP、沒有設定 Port Forwarding，或是不想付費買代理服務、租用伺服器，就失去分享與連線的可能性。

## 你能用它做什麼？

- 與朋友分享 **Minecraft Dedicated Server** 或任何基於 TCP 的遊戲伺服器。
- 在外地筆電上**直接訪問家中電腦的開發網站**，例如正在測試的 **Vite / Next.js / Laravel** 專案。
- 讓團隊**連進你電腦上運行的 Jupyter Notebook 或 Code Server**，一起撰寫、除錯、或分析程式。
- 共享**本地 AI / LLM / Stable Diffusion API**，讓團隊能在遠端就使用你的本地大語言模型或圖片生成服務。
- 連線至自架的**協作平台**（如 **Mattermost、Wiki.js、Penpot** 等），即時編輯與討論。
- 從外部安全地**存取內網資源**，例如家中的 NAS、公司資料庫或內部網站。

## 為什麼沒有流量限制或付費方案？

因為這不是商業代理服務，而是基於 **開放技術** 開發的工具：

- **Electron**：跨平台桌面環境，免安裝網路驅動或修改系統設定。
- **WebRTC**：內建 NAT 穿透與端對端加密，確保傳輸安全並能直接連線。
- **Node.js 的 `net` 模組**：負責 TCP socket 的建立與轉發，支援所有 TCP 協定。

這些基礎技術本身就是自由、開放的，因此 **沒有額外流量限制，也不需要收費**。

---

# 如何使用？

## 網路需求

只要你的網路能正常進行 **線上遊戲** 或 **視訊通話**，就能使用本工具。

- **最常見且穩定的情況**
  - 家用光纖或寬頻網路 (Wi-Fi)
  - 手機行動熱點（4G / 5G）
  - 學校或公司具備對外 IP 的網路

- **可能較難使用的情況**
  - 公用 Wi-Fi（咖啡廳、旅館等，通常會封鎖連線）
  - 嚴格管制的公司防火牆

## 下載與啟動

1. 前往 [Releases 頁面](https://github.com/1ureka/1ureka.net.p2p/releases)下載最新的 **zip 壓縮檔**。
2. 解壓縮後，資料夾內會包含一個 **可執行檔** (例如 Windows 是 `*.exe`)。
3. 直接開啟該可執行檔就能啟動應用程式。
   - **所有應用資料**都會存在於解壓縮後的資料夾中，不會寫入系統。
   - 想要**移除應用**，只需刪除整個資料夾即可，無需額外清理。

## 建立連線

如果你不知道該如何選擇，可以先看下方[應用場景](#應用場景)的說明。

| 角色   | 建立 Session                                                                     | 管理方式                                                                               |
| ------ | -------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| Host   | 啟動後由信令伺服器產生唯一 **Session ID**，將此 ID 分享給 Client，就能建立會話。 | **規則管理**：可動態設定存取範圍（見下表[「Host 規則說明」](#host-規則說明)）。        |
| Client | 從 Host 取得 **Session ID**，送出加入請求並經 Host 同意後，Session 即建立完成。  | **映射表管理**：可動態新增/刪除映射表（見下表[「Client 映射說明」](#client-映射說明)） |

### Host 規則說明

Host 可透過下列選項控制哪些網路範圍能被 Client 存取，這四個選項將會在你創建會話後出現在畫面中：

| Boolean          | 實際匹配範圍                                    | 說明                               |
| ---------------- | ----------------------------------------------- | ---------------------------------- |
| `allowIPv4Local` | `127.0.0.0/8`                                   | 允許本機 TCP 服務                  |
| `allowIPv6Local` | `::1`                                           | 允許 IPv6 本機服務                 |
| `allowLAN`       | `10.0.0.0/8`, `172.16.0.0/12`, `192.168.0.0/16` | 允許區域網路、公司內網、NAS 等資源 |

> [!TIP]
>
> - 預設僅啟用 `allowIPv4Local`。
> - **中途更改規則不會影響已建立的連線**，僅影響之後新建立的連線。

### Client 映射說明

Client 端可在會話建立後，透過「映射表」自訂要如何轉發本地 TCP 流量，映射在會話期間可隨時新增/刪除。
每一條映射的格式為：

```
<本地位址>:<本地端口> => <遠端位址>:<遠端端口>
```

左側是 Client 上的應用程式要連線的位址與端口，右側指定的目標則是你希望透過 Host 代為連線的目標。

| 名稱     | 角色                    | 範例                        | 說明                                               |
| -------- | ----------------------- | --------------------------- | -------------------------------------------------- |
| 本地位址 | Client 本機監聽         | `127.0.0.1`                 | 一般建議使用本地環回位址，確保僅本機應用程式能連線 |
| 本地端口 | Client 對外開放的端口   | `3000`                      | 自訂，不一定需要與遠端相同                         |
| 遠端位址 | Host 端實際要連線的目標 | `127.0.0.1` / `192.168.x.x` | 仍可能因為 Host 的規則允許範圍而無法連線           |
| 遠端端口 | Host 要連線服務的端口   | `25565`, `3000`, `443` 等   | 與目標服務實際設定一致                             |

---

# 應用場景

## 使用遠端的本機服務

當 Host 允許 `allowIPv4Local` 或 `allowIPv6Local` 時，Client 可以直接使用 Host 分享出的本機 TCP 服務，
就像在自己電腦上運行一樣。

| 範例                                | 需啟用 Host 規則                          | Client 映射                          | 最終效果                                                                               |
| ----------------------------------- | ----------------------------------------- | ------------------------------------ | -------------------------------------------------------------------------------------- |
| Minecraft Dedicated Server          | `allowIPv4Local`                          | `127.0.0.1:25565 => 127.0.0.1:25565` | Client 可直接進入 Host 的 Minecraft 伺服器遊玩。                                       |
| Vite / Next.js / Laravel 開發伺服器 | `allowIPv6Local`（Vite 預設僅監聽 `::1`） | `127.0.0.1:5173 => ::1:5173`         | Client 可從瀏覽器開啟 `http://127.0.0.1:5173` 預覽 Host 的開發網站。                   |
| Jupyter Notebook / Code Server      | `allowIPv4Local`                          | `127.0.0.1:8888 => 127.0.0.1:8888`   | Client 可遠端進入 Host 的 Notebook 或 VS Code 編輯器，進行共同開發或分析。             |
| Ollama (LLM API Server, Docker)     | `allowIPv4Local`                          | `127.0.0.1:11434 => 127.0.0.1:11434` | Client 可直接呼叫 Host 的 Ollama LLM API，例如 `http://127.0.0.1:11434/api/generate`。 |

## 使用遠端的內網服務

若 Host 開啟了 `allowLAN`，
Client 就能連線至 Host 所在區域網路中的其他裝置，例如 NAS、資料庫、伺服器等。

| 範例                               | 需啟用 Host 規則 | Client 映射                           | 最終效果                                              |
| ---------------------------------- | ---------------- | ------------------------------------- | ----------------------------------------------------- |
| NAS / 資料庫                       | `allowLAN`       | `127.0.0.1:3306 => 192.168.1.50:3306` | Client 可在本地連上 Host 內網中的資料庫或檔案伺服器。 |
| Nextcloud / OnlyOffice / Collabora | `allowLAN`       | `127.0.0.1:8080 => 192.168.1.20:8080` | Client 可透過本地連線使用 Host 區網內的協作文件服務。 |

---

# 問題回報與協助

如果您在使用過程中遇到任何問題或錯誤，歡迎前往 [GitHub Issues](https://github.com/1ureka/1ureka.net.p2p/issues) 提出回報。

在提交問題時，請盡可能提供以下資訊，這將有助於我們更快地協助您：

- **問題描述**：簡單說明發生了什麼狀況
- **重現步驟**：如何觸發這個問題
- **您的環境**：作業系統版本（Windows / macOS / Linux）
- **錯誤訊息**：如有任何錯誤提示，請附上截圖或文字

感謝您的回報，這將幫助我們持續改進這個工具！
