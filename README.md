# 1ureka.net.p2p

> [!IMPORTANT]
> **一個能讓你把任意 TCP 服務透過 WebRTC 分享給遠端的桌面工具。**

我相信網路應該是自由的 ——
不該因為沒有固定 IP、沒有設定 Port Forwarding，或是不想付費買代理服務、租用伺服器，就失去分享與連線的可能性。

## 你能用它做什麼？

- 與朋友分享 **Minecraft Dedicated Server** 或任何基於 TCP 的遊戲伺服器。
- 遠端存取 **本地 HTTP/HTTPS 服務**（例如測試網站、API）。
- 讓團隊連線到 **本地工具服務**（如本地大語言模型、協作插件）。
- 直通遠端內網的其他機器與資源（如資料庫、NAS、內部網站）。
- 將一端當作 **跨區 VPN 節點**，幫助另一端繞過地區或網路限制。
- 反向代理：讓一端的內網服務能透過另一端的外網端口公開。

## 為什麼沒有流量限制或付費方案？

因為這不是商業代理服務，而是基於 **開放技術** 開發的工具：

- **Electron**：跨平台桌面環境，免安裝網路驅動或修改系統設定。
- **WebRTC**：內建 NAT 穿透與端對端加密，確保傳輸安全並能直接連線。
- **Node.js 的 `net` 模組**：負責 TCP socket 的建立與轉發，支援所有 TCP 協定。

這些基礎技術本身就是自由、開放的，因此 **沒有額外流量限制，也不需要收費**。

## 與 VPN 或代理的不同

- **不會接管整個網路**：只針對你指定的 TCP 服務轉發，不會像 VPN 一樣強制改道所有流量。
- **不依賴中心化伺服器**：資料傳輸是雙方電腦直接連線，伺服器只在連線建立過程中用來交換必要的連線資訊。
- **沒有隱藏門檻**：不必綁定信用卡、不會遇到「免費額度用完」這種設計。

---

# 如何使用？

## 網路需求

只要你的網路能正常進行 **線上遊戲** 或 **視訊通話**，就能使用本工具。

- **最常見且穩定的情況**
  - 家用光纖或寬頻網路 (Wi-Fi)
  - 手機行動熱點（4G / 5G）
  - 學校或公司具備對外 IP 的網路

- **可能較難使用的情況**
  - 公用 Wi-Fi（咖啡廳、旅館等，通常會封鎖連線）
  - 同一區域網路下的兩台設備（例如同一 Wi-Fi 或行動熱點）
  - 嚴格管制的公司防火牆

## 下載與啟動

1. 前往 [Releases 頁面](https://github.com/1ureka/1ureka.net.p2p/releases)下載最新的 **zip 壓縮檔**。
2. 解壓縮後，資料夾內會包含一個 **可執行檔** (例如 Windows 是 `*.exe`)。
3. 直接開啟該可執行檔就能啟動應用程式。
   - **所有應用資料**都會存在於解壓縮後的資料夾中，不會寫入系統。
   - 想要**移除應用**，只需刪除整個資料夾即可，無需額外清理。

## 建立連線

如果你不知道該如何選擇，可以先看下方[應用場景](#應用場景)的說明。

| 角色   | 建立 Session                                                                     | 管理方式                                                                               |
| ------ | -------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| Host   | 啟動後由信令伺服器產生唯一 **Session ID**，將此 ID 分享給 Client，就能建立會話。 | **規則管理**：可動態設定存取範圍（見下表[「Host 規則說明」](#host-規則說明)）。        |
| Client | 從 Host 取得 **Session ID**，送出加入請求並經 Host 同意後，Session 即建立完成。  | **映射表管理**：可動態新增/刪除映射表（見下表[「Client 映射說明」](#client-映射說明)） |

### Host 規則說明

Host 可透過下列四個選項控制哪些網路範圍能被 Client 存取，這四個選項將會在你創建會話後出現在畫面中：

| Boolean          | 實際匹配範圍                                    | 說明                               |
| ---------------- | ----------------------------------------------- | ---------------------------------- |
| `allowIPv4Local` | `127.0.0.0/8`                                   | 允許本機 TCP 服務                  |
| `allowIPv6Local` | `::1`                                           | 允許 IPv6 本機服務                 |
| `allowLAN`       | `10.0.0.0/8`, `172.16.0.0/12`, `192.168.0.0/16` | 允許區域網路、公司內網、NAS 等資源 |
| `allowExternal`  | 其他所有 (Public IP / Domain)                   | 允許外網連線與代理用途             |

> [!TIP]
>
> - 預設僅啟用 `allowIPv4Local`，只分享本機服務，最安全。
> - **中途更改規則不會影響已建立的連線**，僅影響之後新建立的連線。

### Client 映射說明

Client 端可在會話建立後，透過「映射表」自訂要如何轉發本地 TCP 流量，映射在會話期間可隨時新增/刪除。
每一條映射的格式為：

```
<本地位址>:<本地端口> => <遠端位址>:<遠端端口>
```

左側是 Client 上的應用程式要連線的位址與端口，右側指定的目標則是你希望透過 Host 代為連線的目標。

| 名稱     | 角色                    | 範例                                        | 說明                                               |
| -------- | ----------------------- | ------------------------------------------- | -------------------------------------------------- |
| 本地位址 | Client 本機監聽         | `127.0.0.1`                                 | 一般建議使用本地環回位址，確保僅本機應用程式能連線 |
| 本地端口 | Client 對外開放的端口   | `3000`                                      | 自訂，不一定需要與遠端相同                         |
| 遠端位址 | Host 端實際要連線的目標 | `127.0.0.1` / `192.168.x.x` / `example.com` | 仍可能因為 Host 的規則允許範圍而無法連線           |
| 遠端端口 | Host 要連線服務的端口   | `25565`, `3000`, `443` 等                   | 與目標服務實際設定一致                             |

> [!TIP]
> 若要映射外部網站（如 `youtube.com`、`api.openai.com`），請確保填入正確協定的埠號（例如 HTTPS → 443，HTTP → 80）。
> 可參考：[維基百科：TCP 和 UDP 端口號列表](https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers), [IANA 官方埠號清單](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml)

---

# 應用場景

## 使用遠端的本機服務

當 Host 允許 `allowIPv4Local` 或 `allowIPv6Local` 時，Client 可以直接使用 Host 分享出的本機 TCP 服務，
就像在自己電腦上運行一樣。

| 範例             | 需啟用 Host 規則 | Client 映射                          | 最終效果                                                      |
| ---------------- | ---------------- | ------------------------------------ | ------------------------------------------------------------- |
| Minecraft 伺服器 | `allowIPv4Local` | `127.0.0.1:25565 => 127.0.0.1:25565` | Client 能直接連進 Host 的遊戲伺服器                           |
| Vite dev server  | `allowIPv6Local` | `::1:3000 => ::1:3000`               | Client 能訪問 Host 的本地測試網站 (vite 預設只在 IPv6 上運行) |
| 本地 API / 工具  | `allowIPv4Local` | `127.0.0.1:3000 => 127.0.0.1:3000`   | Client 能使用 Host 的 LLM API、測試網站等                     |

## 使用遠端的內網服務

若 Host 開啟了 `allowLAN`，
Client 就能連線至 Host 所在區域網路中的其他裝置，例如 NAS、資料庫、伺服器等。

| 範例         | 需啟用 Host 規則 | Client 映射                            | 最終效果                                                  |
| ------------ | ---------------- | -------------------------------------- | --------------------------------------------------------- |
| 資料庫 / NAS | `allowLAN`       | `127.0.0.1:3000 => 192.168.20.14:3000` | Client 連到本地 3000，即可訪問 Host 區網內的 NAS 或資料庫 |

## 使用遠端作為跨區 VPN / Proxy 節點

若 Host 開啟了 `allowExternal`，
Client 便能透過 Host 轉發任意外部 TCP 連線，達到跨區代理或 VPN 節點的效果。

| 範例              | 需啟用 Host 規則 | Client 映射                         | 最終效果                                    |
| ----------------- | ---------------- | ----------------------------------- | ------------------------------------------- |
| 跨區訪問網站      | `allowExternal`  | `127.0.0.1:3000 => youtube.com:443` | Client 的流量會由 Host 發出，可繞過地區限制 |
| 測試 HTTP Webhook | `allowExternal`  | `127.0.0.1:8080 => webhook.site:80` | Client 可透過 Host 測試外部 HTTP 回呼服務   |

> [!WARNING]
> 開啟 `allowExternal` 後，Host 會允許轉發任意公網連線。
> 請僅在信任的會話中使用，並留意資安風險。

## 反向代理模式（內網服務公開）

當 Client 位於外網、Host 位於內網時，
可利用反向映射將 Host 的服務「掛載」到 Client 的外網端口，
讓外部使用者也能存取 Host 的內部服務。

| 範例         | 需啟用 Host 規則               | Client 映射                       | 最終效果                                                  |
| ------------ | ------------------------------ | --------------------------------- | --------------------------------------------------------- |
| 對外開放 API | `allowIPv4Local` 或 `allowLAN` | `127.0.0.1:443 => 127.0.0.1:8080` | 全球任意使用者訪問 Client 的 443，即等於訪問 Host 的 8080 |

> [!TIP]
> 不論是「直通內網」「VPN 跨區」或「反向代理」，
> 所有傳輸仍然是 **端對端加密的 P2P WebRTC 連線**，不經過第三方伺服器。
